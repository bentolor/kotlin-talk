<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Kotlin ist auch eine Insel: Effiziente & sichere JVM-Entwicklung mit Kotlin</title>
    <meta name="description"
          content="Kotlin ist eine innovative, freie und statisch typisierte Programmiersprache die in JVM Bytecode, Javascript und native Binaries compiliert. Auf ihrer Heimatplattform, der JVM, verfolgt Kotlin das Ziel vollständige Java-kompatibel zu bleiben und gleichzeitig sicherer und präziser zu sein. Die ausdrucksstarke und dennoch gut lesbaren Syntax mit funktionalen Features verspricht weniger Boilerplate Code bei zugleich fehlerärmeren Entwicklung. Ausgerichtet auf den Unternehmenseinsatz hat für Kotlin neben der exzellenten Interoperabilität mit Java stets auch die gute Verständlichkeit, schnelle Compilierzeiten und eine hervorragende Tooling-Unterstützungen hohe Priorität.

JetBrains war von Anfang an stets bemüht Kotlin als ein offenes, unabhängiges und dauerhaft überlebensfähiges Projekt zu etablieren. Spätestens seitdem Kotlin im Mai 2017 auf der Google I/O offiziell in die Android Plattform eingezogen ist, dürfte dies nun endgültig als gesichert gelten und es ist an der Zeit einen intensiven Blick auf diese vollwertige Java Alternative zu werfen.

In dieser Session erleben wir live, wie es sich anfühlt der NullpointerException auf Nimmerwiedersehen zu sagen und sie für Entwicklung gegen funktionale Features, Dataclasses und Extension-Methods einzutauschen. Codebeispiele helfen beim Kennenlernen der Sprache und vermitteln lebendige Eindrücke. Im Fortgeschrittenen Teil der Session blicken wir z.B. auf die Higher-order Functions und der Möglichkeit zur Gestaltung typsicherer DSLs mittels Empfängerobjekten und welche Verbindungen sich hier mit Gradle ergeben. Ein Aus- und Rückblick auf die letzten Neuerungen wie z.B. der Möglichkeit zu nativen iOS Anwendungen und Multiplattform-Projekten rundet das Ganze ab.">

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/white.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/solarized-light.css">

    <!-- Custom, overriding CSS -->
    <link rel="stylesheet" href="css/custom.css">
</head>
<body>
<!-- <img src="img/logo.png" id="title-logo" alt=""/> -->

<div class="reveal">
    <div class="slides">

        <!--
          === Title ===============================================================================
        -->

        <section data-background-color="#fff" data-background-video="vids/island.mp4" data-background-opacity="0.5" data-background-video-loop="true" data-background-video-muted="true">
             <img data-src="https://www.xing.com/img/custom/communities/communities_files/5/6/d/103789/main/Bildschirmfoto_2021-02-10_um_15.34.04.png?1613489348"
                 style="width: 200px; position: absolute; top: -40px; left: 0;"
                 class="plain" alt=""
            />

            <div style="text-align: right;">
                <h2 style="margin: 360px 60px 0; font-size: 1.9em; text-transform: none; padding:0">
                    <img data-src="img/kotlin_logos/logo_Kotlin.svg"
                         style="width: 280px; "
                         class="plain" alt="Kotlin"/> <br/>  ist  auch nur eine 
                         <span class="emphasize">Insel!</span>
                </h2>
                <h4 style="margin: 0.2em 60px; padding:0; font-size: 0.9em;">Effiziente & sichere JVM-Entwicklung mit Kotlin</h4>
            </div>

            <div id="version">
                2022-06-28
            </div>

            <div class="profile" style="position: absolute; top: 0; right: 50px;">
                <div class="profile-sidebar">
                    <div class="profile-userpic">
                        <img data-src="img/bentolor-avatar.png" class="img-responsive" alt="">
                    </div>
                    <div class="profile-usertitle">
                        <div class="profile-usertitle-name">
                            Benjamin Schmid
                        </div>
                        <div class="profile-usertitle-job">
                            Technology Advisor
                        </div>
                    </div>
                </div>
                <div class="profile-content">
                    <a href="https://twitter.com/bentolor">@bentolor</a>
                </div>
            </div>

            <div id="rightsection">
<!--                 <code>?</code> for help
 -->            </div>

            <div id="licence">
                <!--suppress HtmlUnknownAttribute -->
                <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/InteractiveResource"
                      property="dct:title" rel="dct:type">
                    Kotlin ist auch eine Insel: Effiziente & sichere JVM-Entwicklung mit Kotlin
                </span>
                by
                <a xmlns:cc="http://creativecommons.org/ns#" href="https://twitter.com/bentolor"
                   property="cc:attributionName" rel="cc:attributionURL">
                    Benjamin Schmid
                </a>
                is licensed under a
                <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                    Creative Commons License (BY-NC-SA/4.0)
                </a>.
            </div>
        </section>


        <!--
        <section data-background-color="#fff" data-markdown>
            <textarea data-template>
                ### eXXcellent solutions gmbh
                ![eXXcellent Team](img/exxcellent-gruppenfoto.jpg)<!-- .element: width="1000"  -- > <br>
                _„Digitalisierung von Geschäftsprozessen“ – aller Art/Branchen_

                Ulm | München | Stuttgart | Darmstadt

                ~150 Mitarbeiter | Java, Web & (.NET) - Projekte <!-- .element: class="small subline decent"  -- >

                seit 10/2017 hier in Darmstadt <!-- .element: class="x-small subline decent"  -- >
            </textarea>
        </section>
        -->

        <!--
          === Overview ============================================================================
        -->
        <section>
            <section data-background="img/kotlin-island-map.png" data-transition="fade-out">
                <div data-markdown class="abs">
                    ## Was ist Kotlin?
                </div>
                <div class="fragment abs" style="right: 0; top: 620px; text-align: right">
                    <p class="large"><b>Russische Insel</b></p>
                    <p class="x-small subline">im finnischen Golf, 32km vor Petersburg</p>
                </div>
            </section>


            <section data-background="img/kotlin_logos/icon_Kotlin.svg" data-background-color="#fff" class="center">
                <div style="width: 100%; text-align: right;">
                    <p>statisch typisierte<br/>
                        <b><span class="x-large">Allzweck-<br/>Sprache</span></b> für <ul>
                            <li><strong>JVM</strong></li> 
                            <li><strong>Javascript</strong></li>
                            <li><strong>Native</strong> (LLVM)</li>
                            </ul></p>
                </div>
                <aside data-markdown class="notes">
                    * Fokus: JVM
                    * Mit Native auch iOS!
                </aside>
            </section>



            <section data-background="img/kotlin_logos/icon_Kotlin.svg" data-background-color="#fff" class="center">
                <div data-markdown class="right" style="font-size: .8em">
                    ## Prägnanz

                    ## Lesbarkeit

                    ## Sicherheit

                    ## Interoperabilität

                    ## Tooling
                </div>
            </section>


            <section data-background="img/kotlin_logos/icon_Kotlin.svg" data-background-color="#fff" class="center">
                <div class="right">
                    <h2 class="large">Datenblatt</h2>

                    <p>Freie Software</p>
                    <p class="decent subline x-small">APL 2.0 – IDE, compiler, libs, build tools</p>

                    <p>Stabil &amp; LTS</p>
                    <p class="decent subline x-small">Start: ~2010, v1.0 Feb. '16<br/>Long-term backward compatibility</p>

                    <p>JetBrains (&amp; Google) </p>
                    <p class="decent subline x-small">20+ Vollzeit & Community<br/>
                        „dogfooding“ &amp; Android</p>

                    <p>Integrationen</p>
                    <p class="decent subline x-small">IntelliJ, Android Studio, Eclipse,<br> Maven, Ant, Gradle, CLI</p>
                </div>
            </section>

            <section data-background="img/kotlin_logos/icon_Kotlin.svg" data-background-color="#fff" class="center">
                <div class="right">
                    <h2 class="large">Historie</h2>

                    <div style="font-size: 70%">
<!--                         <p>Juli 2011</p>
                        <p class="decent subline x-small">Offizielle Vorstellung</p>
 -->
                        <p><span class="decent">Februar 2016 – </span>1.0</p>
                        <p class="decent subline x-small">Production-ready, LTS version</p>

                        <p><span class="decent">April 2017 – </span>1.1</p>
                        <p class="decent subline x-small">Coroutines, Type Aliases, JS, Android</p>

                        <p><span class="decent">Mai 2017  – </span>Android</p>
                        <p class="decent subline x-small">Google integriert Kotlin in Android</p>

                        <p><span class="decent">November 2017 – </span>1.2</p>
                        <p class="decent subline x-small">Multiplattform-Support</p>

                        <p><span class="decent">November 2018 – </span>1.3</p>
                        <p class="decent subline x-small">Contracts, Unsigneds, Inline Classes</p>

                        <p><span class="decent">August 2020 – </span>1.4</p>
                        <p class="decent subline x-small">SAM conversions, API mode</p>

                        <p><span class="decent">Mai 2021 – </span>1.5</p>
                        <p class="decent subline x-small">JVM Records, Sealed/Inline Classes</p>

                        <p><span class="decent">November 2021 – </span>1.6</p>
                        <p class="decent subline x-small">type inference &amp; coroutines improvements</p>

                        <p><span class="decent">Juni 2022 – </span>1.7</p>
                        <p class="decent subline x-small">K2 Compiler, Builder Inference</p>
                    </div>

                </div>

            </section>

        </section>

        <!--
          === Ausdrucksstärke & Lesbarkeit ========================================================
        -->
        <section>

            <section class="center">
                <h1>Prägnanz &amp; Lesbarkeit</h1>
                <h2 class="handwriting"></h2>

                <div class="abs handwriting fragment"
                     style="transform: rotate(-7deg); left: 600px; top: 230px; font-size: 200%">
                        Schneller an's Ziel!
                </div>
            </section>

            <section class="">
                <h5>Hands on: <a href="https://play.kotlinlang.org/">play.kotlinlang.org</a></h5>
                 <iframe data-src="https://play.kotlinlang.org/" width="1280" height="620"></iframe>
                 <aside data-markdown class="notes">

````
import java.util.*

fun main(args: Array<String>) {
    val name = if (args.size > 0) args[0] else "Publikum"
    val zuschauer = Gast(name, title = Title.wertes)

    println(zuschauer)
    println("Hallo ${zuschauer.title} ${zuschauer.name}")
}

data class Gast(val name: String, var zeit: Date = Date(), val title: Title?)
enum class Title { Herr, Frau, wertes }
````

- Prägnanz: Kein Semikolon
- Kein`new`,
- `if` ist ein Ausdruck
- Properties
- `val` und `var`
- Default Values
- ggf. `getOrElse(0, {"x"})`
                 </aside>
            </section>


            <section>
                <h2>Prägnanz vs. Lesbarkeit</h2>
                <pre style="width: 80%; margin: 40px 0 0 -40px"><code style="font-size: 1.2em;">import java.util.*

fun main(args: Array&lt;String&gt;) {
    val name = if (args.size > 0) args[0] else "Publikum"
    val zuschauer = Gast(name, title = Title.wertes)

    println(zuschauer)
    println("Hallo ${zuschauer.title} ${zuschauer.name}")
}

data class Gast(val name: String,
                var zeit: Date = Date(),
                val title: Title?)
enum class Title { Herr, Frau, wertes }                </code></pre>
                <div class="abs emphasize" style="top: 110px; left: 964px; width: 30%">
                    <p style="text-align: left; line-height: 1em; font-size: 82%">
                        <span class="fragment">&leftarrow; Optional semicolons<br></span>
                        <br>
                        <span class="fragment">&leftarrow; Top-level functions<br></span>
                        <!--&leftarrow; <code>if</code> als Ausdruck<br>--><br/>
                        <span class="fragment">&leftarrow; Kein <code>new</code>,
                        <br>&nbsp;&nbsp;&nbsp;&nbsp;  named Params
                        <br><!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Kein <code>new</code>--></span>
                        <br>
                        <span class="fragment">&leftarrow; String interpolation<br></span>
                        <br>
                        <br>
                        <!--<span class="fragment">&leftarrow; Data classes--> <br></span>
                        <span class="fragment">&leftarrow; Default values <br></span>
                        <span class="fragment">&leftarrow; <code>val</code> ≙ <code>public final</code></span>
                    </p>
                </div>
            </section>


            <section class="">
                <h2>Type inference</h2>

                <div >
                    <div class="twocol" style="width: 54%" data-markdown>
                        ```kotlin
                        fun noTypeInfer(vals: List&lt;Int&gt;): Unit {
                          val distinct: Set&lt;Int&gt; = vals.toSet()
                          val first: Int = vals[0]
                          val negs: List&lt;Int&gt; = vals.filter(
                            fun(n: Int): Boolean {
                                return n < 0
                            }
                          )
                        }
                        ```
                    </div>
                    <div style="position: absolute; left: 52%; top: 230px; font-size: 240%; color: #999">
                        &rightarrow;
                    </div>
                    <div class="twocol" style="width: 42%" data-markdown>
                        ```kotlin
                        fun typeInfer(vals: List&lt;Int&gt;){
                          val distinct = vals.toSet()
                          val first = vals[0]
                          val negs = vals.filter(
                             fun(n) = n < 0


                          )
                        }
                        ```
                    </div>

                    <div style="clear: left"/>
                </div>

                <div class="fragment">
                    <p><strong>Typangaben</strong> üblicherweise <strong>nur an Schnittstellen</strong> erforderlich</p>
                </div>
            </section>


            <section>
                <h2 class="bgap">Data Classes</h2>

                <!-- @formatter:off -->
                <div data-markdown class="twocol" style="padding:0 0 0 96px; width: 500px">
                    ```kotlin
                    data class Gast(
                        val name: String,
                        var zeit: Date = Date(),
                        val title: Title?
                    )
                    ```
                </div>
                <!-- @formatter:on -->
                <div data-markdown class="container decent small" style="padding-top: 1px;">
                    ##### Werte-Container
                    - Um Methoden erweiterbar
                    - unterstützt Basisklassen
                </div>
                <div class="fragment">
                    <div data-markdown class="tgapxl decent" style="clear: left;">
                        ###### Kotlin übernimmt
                    </div>
                    <div class="container decent small">
                        <div data-markdown style="float: left">
                            - Getter &amp; Setter
                            - `equals()`
                        </div>
                        <div data-markdown style="float: left">
                            - `hashCode()`
                            - `toString()`
                        </div>
                        <div data-markdown style="float: left">
                            - `copy()` für Varianten
                            - `componentN()` für Destructuring
                        </div>
                    </div>
                </div>
                <aside data-markdown class="notes">
                    * Vererbung & erweiterbar
                    * Mehr als Java Records 14, welche nur Lese-Container sind
                    * Kann über Annotation auf Java 14 Records gestutzt werden
                </aside>
            </section>


            <section>
                <h3>... <em>exakt</em> dasselbe mit Java</h3>

                <div class="threecol">
                    <pre class="xx-small"><code>public final class Gast {
  @NotNull
  private final String name;
  @NotNull
  private Date zeit;
  @Nullable
  private final Title title;

  @NotNull
  public final String getName() {
    return this.name;
  }

  @NotNull
  public final Date getZeit() {
    return this.zeit;
  }

  public final void setZeit(@NotNull Date date) {
    checkParameterIsNotNull(date, "&lt;set-?&gt;");
    this.zeit = date;
  }

  @Nullable
  public final Title getTitle() {
    return this.title;
  }

  public Gast(@NotNull String name,
              @NotNull Date zeit,
              @Nullable Title title) {
    checkParameterIsNotNull(name, "name");
    checkParameterIsNotNull(zeit, "zeit");
    this.name = name;
    this.zeit = zeit;
    this.title = title;
  }</code></pre>
                </div>
                <div class="threecol">
                    <pre class="xx-small"><code>  public Gast(String string, Date date,
              Title title, int n) {
    if ((n &amp; 2) != 0) {
      date = new Date();
    }
    this(string, date, title);
  }

  @NotNull
  public final String component1() {
    return this.name;
  }

  @NotNull
  public final Date component2() {
    return this.zeit;
  }

  @Nullable
  public final Title component3() {
    return this.title;
  }

  @NotNull
  public final Gast copy(@NotNull String name,
                         @NotNull Date zeit,
                         @Nullable Title title) {
    checkParameterIsNotNull(name, "name");
    checkParameterIsNotNull(zeit, "zeit");
    return new Gast(name, zeit, title);
  }

  public String toString() {
    return "Gast(name=" + this.name +
           ", zeit=" + this.zeit +
           ", title=" + this.title + ")";
  }
</code></pre>
                </div>
                <div class="threecol">
                    <pre class="xx-small"><code>  public int hashCode() {
    String s = this.name;
    Date d = this.zeit;
    Title t = this.title;
    return ((s != null ? s.hashCode() : 0) * 31
          + (d != null ? d.hashCode() : 0)) * 31
          + (t != null ? t.hashCode() : 0);
  }

  public boolean equals(Object object) {
    if (this == object) return true;

    if (!(object instanceof Gast))
        return false;

    Gast gast = (Gast)object;
    if (!areEqual(this.name, gast.name)
        || !areEqual(this.zeit, gast.zeit)
        || !areEqual(this.title, gast.title))
        return false;

    return true;
  }
}</code></pre>
                    <p class="decent">… 3 Attribute!</p>
                </div>
            </section>

            <section class="center">
                <h2>Properties</h2>
                <div>
                    <ul>
                        <li> Klassen in Kotlin kennen keine Felder, nur Properties</li>

                        <li class="tgap">Compiler <strong>generiert</strong>
                            Getter- &amp; Setter sowie Backing Field
                        </li>

                        <li class="tgap"><img src="img/intent-properties.png"
                                              alt="Properties of Android Intent class"
                                              style="float: right; margin: 12px 32px">
                            <code>getX()</code>/<code>setX()</code>-Paare
                            <br>aus <strong>Java</strong> erscheinen
                            <br>als Property <code>x</code>

                        </li>
                        <li class="tgap">Properties unterstützen <em>Delegation</em>
                    </ul>
                </div>
            </section>


            <section>
                <h2>Ausdrücke &amp; Konventionen</h2>

                <div class="container left abs decent"
                    style="top: 112px; left: 520px; font-size: 92%; border-left: 4px solid #999; padding-left: 24px">
                    <p>Mehr Ausdrücke  (<code>if</code>, <code>?:</code>, <code>?.</code>, …)
                    <br>Pattern matching (<code>when</code>)
                    <br>String Templates
                    <br>Syntactic Sugar</p>
                    <p class="tgap"><code>listOf(…)</code>, <code>repeat(3){…}</code>,
                    <br><code>with(x){…}</code>, <code>x.apply{…}</code>, …</p>
                    <p class="tgap"><code>public</code> sind Default
                    <br>kein <code>new</code> – <code>;</code> optional
                    <br>Operatoren &amp; Dekomposition über Namen</p>
                </div>
                <div class="container right abs emphasize"
                    style="top: 104px; left: 96px;  font-size: 112%; font-weight: bold">
                    <p>Ausdrucksstärke
                    <p style="margin-top: 3.7em">Standard-Bibliothek
                    <p style="margin-top: 1.4em">Konventionen
                </div>
                <aside data-markdown class="notes">
                    ...was gibt es sonst noch zum Thema Prägnanz & Lesbarkeit?

                    Ein paar Dinge haben wir bereits gesehen. 
                    Ein paar der Sachen werden wir  
                </aside>
            </section>

        </section>



        <!--
          === Sicherheit ==========================================================================
        -->
        <section>

            <section class="center">
                <h1>Sicherheit</h1>
            </section>


            <section>
                <h2>First-class immutables</h2>
                <div class="left container">
                    <p class="tgap fragment"><strong>Nur-lesbare Variablen</strong>
                        aufwandsfrei durch <code>val</code> statt <code>var</code></p>

                    <div class="fragment">
                        <p class="tgap"><strong>Standard-Collection Interfaces</strong> (<code>List</code>, <code>Set</code>, …) sind read-only
                            <span class="decent small"><br/>
                                Zum ändern muss man z.B. <code>MutableList</code> statt <code>List</code> nutzen
                            </span>
                        </p>
                    </div>


                    <div class="fragment">
                        <p class="tgap"><strong>Klassen &amp; Methoden sind <code>final</code> by Default</strong></p>
                        <!-- <p class="decent lgap small">Frameworks sollten sich daher als Mantra</p> -->
                        <pre style="width: 700px; margin: 0 60px"><code class="kotlin">open class ExtendableClass {
        open fun overridableMethod() { … }
    }
    
    class Derived: ExtendableClass() {
        override fun overridableMethod() { … }
    }</code></pre>
                    </div>  
                </div>
                <div class="abs handwriting fragment"
                     style="width: 530px;  transform: rotate(7deg); left: 760px; top: 450px; color:  red">
                    Mutige Entscheidung!<br>
                    <span style="color: #999" class="small">… Framework-Entwickler müssen Acht geben!</span>
                </div>
            </section>


            <section data-background-video="img/atomic-bomb.mp4"
                     data-state="speedupvideo">
                <h2 style="color: #fff">The <br>billion-dollar <br>mistake</h2>
                <div style="text-align: right; color: #aaa; margin: -36px 370px"><i>Tony Hoare</i> </div>

                <div style="margin-top: 400px; background-color: rgba(0,0,0,.5); padding: .2em" class="fragment">
                    <code>null</code> <span style="color:white">und seine Folgen</span>
                </div>
            </section>


            <section class="center">
                <div data-markdown class="">
                    <script type="text/template">
                        # <span class="decent">Philosophie  </span>
                        ## Mache `NullPointerException` <br> zu einem _compile-time_ Fehler, <br>nicht _run-time Fehler_
                    </script>
                </div>
            </section>


            <section>
                <h2>Nullwert-Sicherheit</h2>

                <div class="left" style="width: 70%; margin: 0 auto;">
                    <p>Nur <i>explizit Nullwert-fähige Typen</i>
                    akzeptieren <code>null</code>.

                    <br>Ungeprüfte Zugriffe führen zu <em>Compile-Fehlern</em>!</p>

                    <!-- style="width: 560px; margin: 0 auto" -->
                    <div data-markdown >
                    ```kotlin
                    var nullable: String? = null
                    var nonNullable: String = "Hi!"

                    // Ab hier compiliert nichts mehr …
                    nonNullable = nullable
                    nonNullable = null
                    nullable.isEmpty()
                    ```
                    </div>

                    <h3 class="tgap"><em>Nullwerte sind Bestandteil <br>des Typsystems!</em></h3>

                    <p class="decent x-small">An den Schnittstellen baut Kotlin
                        Prüfungen &amp; <code>@NotNull</code> Annotationen ein.</p>
                </div>
            </section>


            <section class="center" data-background-iframe="https://play.kotlinlang.org/" data-background-interactive>
                <aside data-markdown class="notes">
````
class Greeter(val s: String) {
    fun toUp(): String = s.toUpperCase()
    fun doHello() {
        println("Hallo ${toUp()}!")
    }

}

fun main(args: Array<String>) {
    Greeter("Leute").doHello()
    Greeter(null).doHello()
}
````

1. `Greeter(null).doHello()` und `String?` 
3. `fun toUp(): String? = s?.toUpperCase()`
4. `fun toUp(): String = s?.toUpperCase() ?: "NULL"`
5. Smart Cast: `return if (s != null) s.toUpperCase() else "null"`
2. `!!`

````
    fun toUp(): String {
        return if (s != null) {
            s.toUpperCase()
        } else {
            "null"
        }
    }
````

                </aside>
            </section>


            <section>
                <h3>Effizienter Umgang mit Nullwert-Typen</h3>
                <div class="smaller">
                    <div data-markdown class="left twocol" style="border-right: 6px solid #ddd;  padding-left: 24px">
                        <script type="text/template">
                        ###### Safe nagivation operator<!-- .element style="margin: 32px 0 -12px 0" -->
                        ```kotlin
                        nullable = nullable?.toUpperCase()
                        ```

                        ###### Elvis operator<!-- .element style="margin: 48px 0 -12px 0" -->
                        ```kotlin
                        nonNullable = nullable ?: ""
                        ```

                        ###### Kotlin extension für Nullable-Typen<!-- .element style="margin: 48px 0 -12px 0" -->
                        ```kotlin
                        // equals/orEmpty für String?
                        nonNullable = nullable.orEmpty()
                        val b = nullable.equals("foo")
                        ```
                        </script>
                    </div>
                    <!-- @formatter:off -->
                    <div data-markdown class="left twocol" style="width: 44%; padding-left: 24px ">
                        <script type="text/template">
                        ###### Smartcast<!-- .element style="margin: 32px 0 -12px 0" -->
                        ```kotlin
                        if (nullable != null) {
                           nonNullable = nullable.trim()
                        }
                        ```

                        ###### Ich-weiss-es-besser&trade;<!-- .element style="margin: 48px 0 -12px 0" -->
                        ```kotlin
                        //NPE-Gefahr voraus!
                        nullable!!.trim(3)
                        nonNullable = nullable!!
                        ```
                        </script>
                    </div>
                    <!-- @formatter:on -->
                    <aside data-markdown class="notes">
                        * Beispiel aus Android
                        * Oben typischer Android SDK Java Code 
                        * `?.`
                        * "Safe" (nullable) cast operator `as?`
                        * Smart Casts `is EditText`
                    </aside>
                </div>
            </section>


            <section>
                <h3>Effizienter Umgang mit Nullwert-Typen</h3>
                <div class="smaller">
                    <div data-markdown class="">
                        <script type="text/template">
```java
TextView child = null;
if (toolbar != null && toolbar.getChildAt(0) instanceof TextView) {
    child = (TextView) toolbar.getChildAt(0);
}
textView = child != null ? child : new TextView(getBaseContext());

if (textView instanceof EditText) {
    ((EditText) textView).selectAll();
}
```
## &downarrow;<!-- .element style="margin: -32px auto -0 auto; color: #ccc" -->

```kotlin
val child = toolbar?.getChildAt(0) as? TextView
textView = child ?: TextView(baseContext)

if (child is EditText) {
    child.selectAll()
}
```
</script>
                    </div>
                </div>
            </section>

        </section>



        <!--
          === Interop =============================================================================
        -->
        <section>

            <section class="center">
                <h1>Interoperabilität</h1>
            </section>
            
            <section>
                <h3>Java/Kotlin Interop</h3>
                <img src="img/java-kotlin-bidir.png" class="plain" style="width: 900px">
                <p>Mischen von Java &amp; Kotlin-Code</p>
                <p class="x-small decent subline">bei problemlosem, gleichzeitigen Zugriff in beide Richtungen</p></p>
                <aside data-markdown class="notes">
                    * Compiler kann Kotlin + Java
                    * Bidirektionale Beziehungen sind Ok!
                    * Ideal: Incrementelle Migration
                </aside>
            </section>

            <section data-verbatim="true">
                <div class="smaller">
                    <div data-markdown>
                        <script type="text/template">
                            ```java
public class JavaClass {
    public static void main(String[] args) {
        new JavaClass().callKotlinClass();
    }

    void callKotlinClass() {
        KotlinClass kotlinClass = new KotlinClass(this);
        kotlinClass.callJavaClassMethod();
    }

    public String getValueFromJavaClass()     { return "Hi from Java!";   }

    public void printInJavaClass(String text) { System.out.println(text); }
}
                            ```
                            ## &downarrow; &uparrow;<!-- .element style="margin: -32px auto -0 auto; color: #ccc" -->

                            ```kotlin
class KotlinClass(val jclass: JavaClass) {
    fun callJavaClassMethod() {
        jclass.printInJavaClass("Kotlin got: ${jclass.valueFromJavaClass}" )
    }
}                            ```
                        </script>
                    </div>
                </div>
            </section>


            <section class="container ">
                <div style="margin: 0 auto; width: 76%;">
                    <div data-markdown>
                        ## Kotlin & Java
                        *Nahtlose Java &lrarr; Kotlin Interoperabilität ist Top Priorität*
                    </div>
                    <div data-markdown class="left fragment">
                        ##### Compilert in Java 8,9,…,18 Bytecode
                        - Versteht Kotlin & Java Code
                        - Inkrementelle Migration gut möglich
                        - Bidirektionale Beziehungen kein Problem
                    </div>
                    <div data-markdown class="left fragment">
                        ##### Kein separates Kotlin-SDK
                        * Kotlin *nutzt direkt die JDK-Klassen*
                        * ergänzt viele, kleine _Extensions_  – ca. 1,5MB in v1.7
                    </div>
                </div>
            </section>



            <section class="">
                <div data-markdown>
                    <script type="text/template">
                        ## Kotlin vs. Java
                    </script>
                </div>
                <div data-markdown class="threecol small">
                    <script type="text/template">
                        ##### In Kotlin gelöst:
                        * `NullPointerException`
                        * Keine Raw-Types
                        * echte Funktions-Typen
                        * Arrays sind invariant
                        * Type Projections
                    </script>
                </div>
                <div data-markdown class="threecol small">
                    <script type="text/template">
                        ##### In Kotlin fehlt:
                        * Checked Exceptions
                        * Primitive Typen
                        * (nicht-private) Felder
                        * `static`
                        * Wildcards
                        * `a ? b : c`
                    </script>
                </div>
                <div data-markdown class="threecol small left decent">
                    <script type="text/template">
                        ##### Kotlin hat zusätzlich:
                        Lamba-Ausdrücke, `inline`, Extensions, Typ-Inferenz
                        String-Templates, Smart Casts, Properties, Überladbare Operatoren
                        Property/Class Delegation, `data class`, r/o Collections,
                        Coroutines, Singletons, `<in T1, out T2>`, …
                    </script>
                </div>
                <div style="clear: both"></div>
                <div class="x-small tgap decent">Siehe auch: <a href="https://kotlinlang.org/docs/reference/comparison-to-java.html"> https://kotlinlang.org/docs/reference/comparison-to-java.html</a></div>
                <aside data-markdown class="notes">
                    * Invariant Arrays :  Kotlin does not allow assign Array<String> to an Array<Any>, preventing possible runtime failure.  (but you can use Array<out Any>, see Type Projections).
                </aside>
            </section>



            <section class="center" data-verbatim="">
                <div data-markdown >
                    <script type="text/template">
                        ## Kotlin Konventionen

                        * Folgt den meisten Java-Konventionen
                            * Typen in Uppercase
                            * Methoden & Properties in lower camelCase

                        * Pakete: Übliche Reverse Notation `de.exxcellent.foo`

                            * Mehrere Klassen pro Datei erlaubt
                            * Dateiname &NotEqual; Klassenname
                            * Ordnerstruktur kann &NotEqual; Paketstruktur
                            * auch Top-Level Funktionen (klassenlos) möglich
                    </script>
                </div>
            </section>



            <section>
                <div data-markdown class="small">
                    ### Kotlin vs. Java Types

                    |Kotlin  | &rightarrow; |Java
                    | --:    | -- | --
                    |`Any`   | |`java.lang.Object`
                    |`Int`   | |`int`
                    |`Int?`  | |`java.lang.Integer`
                    |`Array&lt;Int&gt;` | | `Integer[]`
                    |`IntArray` | | `int[]`
                </div>
            </section>


            <section>
                <h3><code>null</code>-Werte aus Java-Code</h3>
                <p class="small">Alle Rückgabewerte aus Java-Code als <code>T?</code> zu verstehen wäre richtig,<br/> aber <i>extrem</i>
                    unkomfortabel. Kotlin setzt daher auf <em>Platform Types <code>T!</code></em>.</p>

                <img src="img/java-nullable.png" class="plain tgap fragment" style="width: 540px">

                <div class="abs handwriting fragment"
                     style="width: 430px;  transform: rotate(-13deg);
                            left: 920px; top: 200px; color: #66c; font-size: 110%">
                    Kann nicht aus Kotlin heraus erzeugt werden!
                </div>

                <div class="fragment">
                    <p class="small" style="margin: -12px 0">&downarrow;</p>
                    <div data-markdown style="width: 68%; margin: 0 auto">
                        ```kotlin
                        System.getenv("_PWD").length   // Potentiell NPE!
                        ```
                    </div>
                </div>

                <div data-markdown style="width: 68%; margin: 48px auto" class="small fragment">
                    Volle Sicherheit kann man wiedererlangen durch:
                    1. Auszeichnung mit `@Nullable` in Java -> `String?`
                    1. Elvis Operator &amp; Co.: `System.getenv("_PWD")?.length`
                    1. Auszeichnung eines `@Nullable` Defaults für ganze Pakete
                </div>

            </section>


            <section>
                <h5>Java &rightarrow; Kotlin: Beispiel <code>static</code>-Feld</h5>
                <div data-markdown style="width: 70%; margin: 1.2em auto 0 auto" >
                    <script type="text/template">
                        ```java
                        public static final int VISIBLE = 0x00000000;
                        ```
                    </script>
                </div>
                <div data-markdown style="width: 70%; margin: 0 auto" class="fragment" >
                    <script type="text/template">
                        ## &downarrow;<!-- .element style="margin: -32px auto -0 auto; color: #ccc" -->

                        Kotlin kennt kein `static`. Dafür: _„companion object“_:

                        ```kotlin
                        companion object {
                           @JvmField val VISIBLE: Int = 0x00000000
                        }
                        ```
                    </script>
                </div>
                <div class="tgap fragment decent small">Fazit: Für elegante Java-APIs teils sperriger Kotlin-Code erforderlich…</div>
            </section>

            <section>
                <div data-markdown class="small">
                    ### Kotlin Interop-Features

                    |Element | Beschreibung
                    | --    | -- |
                    |`@JvmStatic`                | Statische Methode / Property
                    |`companion object`          | Singleton / static Object
                    |`@JvmField`                 | Property als Java Feld verfügbar machen
                    |`@JvmName`                  | Bytecode/JVM Namen steuern
                    |`@JvmOverloads`             | Optionale Parameter ausmultiplizieren
                    |`@Throws`                   | Checked exceptions Signatur deklarieren
                    |`@Nullable / @NotNull`      | `T?` vs. `T`
                    |`@JvmRecord`                | Data Class als JDK14 Records
                </div>
            </section>


        </section>



        <!--
          === Tooling =============================================================================
        -->
        <section>

            <section class="center">
                <h1>Tooling</h1>
            </section>


            <section>
                <h2>Tooling: Design Goals</h2>
                <div data-markdown style="width: 64%; float: left">
                    <script type="text/template">
                        - Compiler *vergleichbar schnell wie Java* <br><span class="decent small">(vs. Scala)</span>

                        - *Exzellenter IDE-Support:* <br>
                          Navigation, Refactorings, <br>Inspections, Completions<br>
                           <span class="decent small">(mit DSLs Grund #1 für Gradle für Kotlin)</span>

                        - *Nahtloses Zusammenspiel* <br>mit bestehenden Tools & Plattformen
                    </script>
                </div>
                <img src="img/refactor-options.png" alt="Kotlin refactoring options">
            </section>

            <section>
                <h3>Automatische Konvertierung <br>Java &rightarrow; Kotlin</h3>
                <div data-markdown style="margin: 32px auto">
                    ![Convert Java Classes](img/convert-java.png)
                    ![Convert Java Code from Clipboard](img/kotlin-copypaste-convert.png)
                </div>
            </section>

        </section>


        <!--
          === Effizienz & Idiome =============================================================================
        -->
        <section>
            <section class="center">
                <h1>Effizienz & Idiome</h1>
            </section>



            <section class="">
                <div data-markdown >
                    <script type="text/template">
                        ## `when`-Expression
                        Quasi <code>switch</code>-Ersatz, nur mit deutlich mehr Power
                        ```kotlin
                        when (x) {
                            1 -> print("x == 1")
                            2 -> print("x == 2")
                            else -> { // Note the block
                                print("x is neither 1 nor 2")
                            }
                        }
                        ```
                    </script>
                </div>
            </section>




            <section data-transition="fade" data-background="#fff">
                <!-- @formatter:off -->
                <div data-markdown style="width: 75%; margin: 0 auto">
                    #### „Wie ist denn das Wetter?“ in Java
                    ```
                    public class WeatherIndicator {
                        void rateWeather(int celsius) {
                            String status;
                            Color color;
                            if (celsius < 5) {
                                status = "Saukalt!";
                                color = Color.BLUE;
                            } else if (celsius >= 5 && celsius <= 20) {
                                status = "Geht so!";
                                color = Color.ORANGE;
                            } else {
                                status = "Urlaub!";
                                color = Color.RED;
                            }
                        }
                    }
                    ```
                </div>
                <!-- @formatter:on -->
                <img src="img/kotlin-copypaste-convert-black.png"
                     style="position: absolute; z-index: 1; left: 0; right: 0; margin: 0 auto; top: 200px;"
                     class="plain fragment"
                />
                <aside data-markdown class="notes">
                    1. Paste & Convert Kotlin
                    2. `else if` -> Range check
                    3. `val (status: String, color: Color)` mit `Pair(x,y)` einführen
                    4. Type inference
                    5. Replace when 
                    6. Remove Braces from all
                    7. Pair -> to
                </aside>
            </section>

            <section data-transition="fade" data-background="#fff">
                <!-- @formatter:off -->
                <div data-markdown style="width: 75%; margin: 0 auto">
                    #### ... in Kotlin
                    ```
                    class WeatherIndicator {
                        fun rateWeather(celsius: Int) {
                            val status: String
                            val color: Color
                            if (celsius < 5) {
                                status = "Saukalt!"
                                color = Color.BLUE
                            } else if (celsius >= 5 && celsius <= 20) {
                                status = "Geht so!"
                                color = Color.ORANGE
                            } else {
                                status = "Urlaub!"
                                color = Color.RED
                            }
                        }
                    }

                    ```
                </div>
                <img src="img/refactor-to-in.png"
                     style="position: absolute; z-index: 1; left: 0; right: 0; margin: 0 auto; top: 320px;"
                     class="plain fragment"
                />
                <!-- @formatter:on -->
            </section>

            <section data-transition="fade" data-background="#fff">
                <!-- @formatter:off -->
                <div data-markdown style="width: 75%; margin: 0 auto">
                    #### ...mit Range Check
                    ```
                    class WeatherIndicator {
                        fun rateWeather(celsius: Int) {
                            val status: String
                            val color: Color
                            if (celsius < 5) {
                                status = "Saukalt!"
                                color = Color.BLUE
                            } else if (celsius in 5..20) {
                                status = "Geht so!"
                                color = Color.ORANGE
                            } else {
                                status = "Urlaub!"
                                color = Color.RED
                            }
                        }
                    }

                    ```
                </div>
                <!-- @formatter:on -->
            </section>

            <section data-transition="fade" data-background="#fff">
                <!-- @formatter:off -->
                <div data-markdown style="width: 75%; margin: 0 auto">
                    #### ... mit Destructuring & `if`-Expression
                    ```
                    class WeatherIndicator {
                        fun rateWeather(celsius: Int) {
                            val (status: String, color: Color) =
                              if (celsius < 5) {
                                  Pair("Saukalt!", Color.BLUE)
                              } else if (celsius in 5..20) {
                                  Pair("Geht so!", Color.ORANGE)
                              } else {
                                  Pair("Urlaub!", Color.RED)
                              }
                        }
                    }
                    ```
                </div>
                <!-- @formatter:on -->
            </section>

            <section data-transition="fade" data-background="#fff">
                <!-- @formatter:off -->
                <div data-markdown style="width: 75%; margin: 0 auto">
                    #### ... mit Type Inference durch `Pair&lt;A,B>`
                    ```
                    class WeatherIndicator {
                        fun rateWeather(celsius: Int) {
                            val (status, color) =
                              if (celsius < 5) {
                                  Pair("Saukalt!", Color.BLUE)
                              } else if (celsius in 5..20) {
                                  Pair("Geht so!", Color.ORANGE)
                              } else {
                                  Pair("Urlaub!", Color.RED)
                              }
                        }
                    }
                    ```
                </div>
                <!-- @formatter:on -->
                <img src="img/refactor-when.png"
                     style="position: absolute; z-index: 1; left: -330px; right: 0; margin: 0 auto; top: 210px;"
                     class="plain fragment"
                />
            </section>

            <section data-transition="none" data-background="#fff">
                <!-- @formatter:off -->
                <div data-markdown style="width: 80%; margin: 0 auto">
                    #### ... mit Pattern Matching über `when`
                    ```
                    class WeatherIndicator {
                        fun rateWeather(celsius: Int) {
                           val (status, color) = when {
                             celsius < 5 -> Pair("Saukalt!", Color.BLUE)
                             celsius in 5..20 -> Pair("Geht so!", Color.ORANGE)
                             else -> Pair("Urlaub!", Color.RED)
                           }
                        }
                    }
                    ```
                </div>
                <!-- @formatter:on -->
            </section>

            <section data-transition="none" data-background="#fff">
                <!-- @formatter:off -->
                <div data-markdown style="width: 80%; margin: 0 auto">
                    #### ... mit Standbard-Bibliotheks Extension
                    ```kotlin
                    class WeatherIndicatorKt {
                        fun rateWeather(celsius: Int) {
                           val (status, color) = when {
                             celsius < 5 -> "Saukalt!" to Color.BLUE
                             celsius in 5..20 ->  "Geht so!" to Color.ORANGE
                             else -> "Urlaub!" to Color.RED
                           }
                        }
                    }
                    ```
                </div>
                <div data-markdown style="width: 80%; margin: 0 auto" class="fragment">
                    `fun &lt;A, B> A.to(that: B): Pair&lt;A, B> = Pair(this, that)`
                </div>
                <!-- @formatter:on -->
            </section>



            <section class="">
                <div data-markdown >
                    <script type="text/template">
                        ## `when` on Speed (1)

                        ```kotlin
                        val validNumbers = setOf(4, 7, 13)

                        val result = when (x) {
                            1, -1, 0 -> "x is simple"

                            in 2..10 -> "x is in the range"
                            in validNumbers -> "x is still valid"

                            !in -1..20 -> "x is outside the range"

                            validNumbers.first() * 2  -> "double of first"

                            else -> "none of the above"
                        }                        ```

                        Enumerations, Ranges, Expressions,  `when` als Expression
                    </script>
                </div>
            </section>



            <section class="left">
                <h2>Extension methods & properties </h2>

                <!-- @formatter:off -->
                <div>
                    <h5>Fremde Klasse um Methoden ergänzen</h5>
                    <pre class="kotlin"><code>fun Fragment.toast(message: String, duration: Int = Toast.LENGTH_SHORT) {
    Toast.makeText(this.getActivity(), message, duration).show()
}</code></pre>
                </div>

<div class="fragment">
    <h5>Fremde Klasse um Properties ergänzen</h5>
<pre class="kotlin"><code>var EditText.stringValue: String
    get() = text.toString()
    set(str) { setText(str)  }</code></pre>
</div>

<div class="fragment">
    <h5>Verwendung</h5>
<pre class="kotlin"><code>toast("Hallo Zuschauer!")
nameField.stringValue = "Max Muster"</code></pre>
</div>
                <!-- @formatter:on -->
                <aside data-markdown class="notes">
                    * `this` zeigt auf erweiterte Objektinstanz
                    * Properties: keine neuen Felder;
                </aside>
            </section>


            <section data-markdown>
                    <textarea data-template>
                        ## Extension methods &amp; `null`

                        Extensions können auf <code>null</code>-fähigen Typen definiert werden

                        ```kotlin
                        val nullValue = null as String?

                        // Kotlin Extensions – hier keine NPE!
                        nullValue.equals("foo")
                        nullValue.toString()
                        ```
                    </textarea>
            </section>


            <section class="">
                <h2>Utilities „frei Haus“</h2>
                <div class="left" style="width: 90%; margin: 0 auto;">
                <div class="small">
                    Zahlreiche Extensions in der Kotlin Standardbibliothek (komfortabel über <strong>Code-Completion</strong> zugänglich) <em>erweitern bestehende JDK Klassen und Interfaces</em>
                </div>
                    <!-- @formatter:off -->
                <div class="small tgap left">
                    Sie helfen zu <strong>prägnanten</strong>,
                    dennoch <strong>intuitiv lesbar</strong> Code.
                </div>

                <pre class="kotlin"><code class="small">val list = listOf("a", "b", "c")
for (index in list.indices.filter { it % 2 == 0 }) {
    println("$index -> ${list[index]}")
}
</code></pre>
<div class="fragment">
<div class="small">Anstatt in Java</div>
                    <pre class="java"><code class="small">List&lt;String&gt; list = Arrays.asList("a","b","c");
for (int index = 0; index < list.size(); index++) {
    if (index % 2 == 0)
        System.out.println(index + " -> " + list.get(index));
}</code></pre>

                    <!-- @formatter:on -->
                </div>
<!--                 <div class="x-small  decent">
                    Im Beispiel: <code>listOf</code>, <code>indices</code>, <code>filter</code>.
                </div>
 -->            
                </div>
                </section>

            <section class="">
                <div data-markdown >
                    <script type="text/template">
                        ### Kotlin Extensions für Collections

                        ![completion](img/collection-extensions.png)
                    </script>
                </div>
                <div data-markdown class="threecol">
                    <script type="text/template">
                        * `filter()`
                        * `map()`
                        * `reduce()`
                    </script>
                </div>
                <div data-markdown class="threecol">
                    <script type="text/template">
                        * `count()`
                        * `find()`
                        * `any()`
                    </script>
                </div>
                <div data-markdown class="threecol">
                    <script type="text/template">
                        * `flapMap()`
                        * `groupBy()`
                        * …
                    </script>
                </div>
                <div style="clear: both"></div>
                <div data-markdown class="tgap small decent">
                    <script type="text/template">
                        Typischweise `inline`-Extensions, d.h. _kein Performance Overhead_!
                    </script>
                </div>
            </section>


        </section>



        <!--
          === Kotlin & Android ====================================================================
        -->
        <section>

            <section class="center">
                <img src="img/kotlin_logos/icon_Kotlin.svg"
                     style="height: 80px; left: 920px; top: 30px"
                     class="abs plain"
                     alt="Kotlin Icon"/>
                <img src="img/android-robot.svg"
                     style="height: 90px; left: 920px; top: 130px"
                     class="abs plain"
                     alt="Google Android Logo"/>
                <h1 style="text-align: right; margin-right: 400px; padding-right: 40px; border-right: 5px solid black">Kotlin<br/>&amp; Android</h1>
            </section>


            <section class="center">
                <h2><img src="img/kotlin_logos/icon_Kotlin.svg" style="height: 52px;" class="plain" alt="Kotlin Icon"/>
                    +
                    <img src="img/android-robot.svg" style="height: 52px;" class="plain" alt="Google Android Logo"/>
                    – Ein Dream-Team?
                </h2>
                <div>
                    <ul>
                        <li><strong><em>effiziente</em></strong> &amp; <strong><em>fehlerarme</em></strong> Entwicklung
                        </li>
                        <li>konzipiert für den <strong>industriellen Einsatz</strong></li>
                        <li>erzeugt <strong>Java 8 Bytecode</strong>
                            <span class="small decent subline"> – perfekt für Android</span>
                        </li>
                        <li><strong>100% Java Interoperabilität</strong>
                            <span class="small decent subline">
                                – in beide Richtungen …
                            </span>
                        </li>
                        <!--<li>klassenweises <strong><em>Mischen von Java &amp; Kotlin</em></strong>-Code</li>-->
                        <li>
                            <strong>Tooling-Heimspiel</strong>
                            <span class="small decent subline">
                                –  Android Studio &amp; Gradle 3 setzen auf Kotlin
                            </span>
                        </li>
                        <li class="decent small">Aber: Overhead stdlib & Properties-Methoden</span></li>
                    </ul>
                </div>
            </section>

            <section data-background="img/google-io-2017-kotlin-announcement.jpg" data-transition="fade">
                <h2 style="background-color: rgba(252, 248, 237, 0.8); margin-top: 600px; padding: 4px">
                    Im Mai 2017 – die Antwort
                </h2>
            </section>

            <section data-background="img/googles-fremde-lorberen.png"  data-transition="fade">
                <div style="background-color: rgba(255, 255, 255, 0.9); margin-top: 680px; padding: 12px; text-align: right;">
                    <a href="https://heise.de/-3717940">https://heise.de/-3717940</a>
                </div>
            </section>

            <section class="center">
                <h1><img src="img/android-robot.svg" style="height: 200px;" class="plain" alt="Google Android Logo"/> on speed</h1>
            </section>


            <section class="container center">
                <h3 class="bgap emphasize">Typischer Android-Boilerplate ...</h3>
                <div class="tgapxl">
                    <pre style="width: 80%" ><code class="java">EditText editTitle = (EditText) v.findViewById(R.id.edit_title);
editTitle.setText(mItem.getTitle());

CheckBox enabledBox = (CheckBox) v.findViewById(R.id.enable_box);
enabledBox.setChecked(true);

Button createButton = (Button) v.findViewById(R.id.create_entry);
createButton.setOnClickListener(new OnClickListener() {
    @Override public void onClick(View button) {
        createElement();
    }
});</code></pre>
                    <div class="decent subline small">
                        <p>… ständige Lookups &amp; Typecasts von Views über <code>findViewById()</code>.
                    </div>
                </div>
            </section>

            <section>
                <h4>Kotlin Extensions aktivieren</h4>
                <img src="img/kotlin-add-android-extensions.png" style="width: 60%; margin-top: .8em"
                     alt="Add Kotlin Extensions to Gradle Build">
            </section>

            <section>
                <h2>Virtuelle Properties <br>für UI-Elemente</h2>
                <div>
                    <p>Das <em>Kotlin Android Extensions</em> erzeugt virtuelle <code>mylayout.xml</code>-Pakete
                </div>
                <pre class="kotlin"><code>import kotlinx.android.synthetic.main.mylayout.*</code></pre>
                <pre class="kotlin"><code>edit_title.setText(mItem.title)
enable_box.isChecked = true
create_entry.setOnClickListener { createElement() }</code></pre>
                <p class="tgap">
                    Ein einfacher Import erlaubt <em>typsicheren</em> Zugriff auf alle
                    <br>darin enthaltene View-Elemente direkt als simples Property.
                    <br><span class="decent small"><i>Ohne zusätzlichen Code, Annotations</i> oder <i>Runtime!</i></span>
                </p>
            </section>

            <section data-background-color="#333"
                     data-state="speedupvideo"
                     data-background-video="img/screencast-kotlin-android.mp4">
            </section>


            <section data-background-color="#333">
                <img data-src="img/hello-android-layout.png"
                     alt="Hello Android: Layout"
                     style="margin: -48px; padding:0">
            </section>


            <section data-transition="fade-out">
                <h3>Hello Android: Code part #1</h3>
                <img data-src="img/hello-android-code-1.png"
                     alt="Hello Android: Code part #1"
                     style="margin: -0px; padding:0; width: 64%">
            </section>


            <section data-transition="fade-in">
                <h3>Hello Android: Code part #2</h3>
                <img data-src="img/hello-android-code-2.png"
                     alt="Hello Android: Code part #1"
                     style="margin: -0px; padding:0; width: 64%">
            </section>

            <!--<section>
            <section class="center">
                <h1><img src="img/kotlin_logos/icon_Kotlin.svg" style="height: 74px;" class="plain" alt="Kotlin Icon"/>
                    <span class="decent">+</span>
                    <img src="img/android-robot.svg" style="height: 80px;" class="plain" alt="Google Android Logo"/>
                    – Drawbacks
                </h1>
            </section>


            <!--<section>
                <div class="left container">
                    <h3>Die (wenigen) Schattenseiten</h3>

                    <h6>64K Methoden Limit</h6>
                    <ul>
                        <li>Dalvik Limit: 65.536 Methoden pro DEX file.
                            <span class="decent small">
                                 <br>&rightarrow; Jedes Kotlin Properties = +2 Methoden
                                 <br>&rightarrow; Abhilfe: Multidex &amp; <code>@JvmField</code>
                             </span>
                         </li>
                    </ul>

                    <h6 class="tgap">Overhead (gering)</h6>
                    <ul>
                        <li>IDE: Auto-completion Performance <span class="decent small">(minimal)</span>
                         </li>
                        <li>APK Größe: ~736KB &amp; Checks</li>
                        <li>Compilerlaufzeit im 1. Durchgang <span class="decent small">(~15%)</span></li>
                    </ul>

                </div>
            </section>-->

        </section>



        <!--
          === Kotlin Advanced =====================================================================
        -->
        <section>

            <section class="center">
                <h1><img src="img/kotlin_logos/icon_Kotlin.svg" style="height: 80px;" class="plain" alt="Kotlin Icon"/>
                    – Advanced
                </h1>
            </section>


            <section class="center">
                <h2>Funktionen als <br>first-class elements</h2>

                <div class="left" style="width: 80%; margin: 20px auto">
                    <p>Funktionen sind Sprachelemente erster Klasse und können daher auch
                        als <em>Variablen, Properties, Parameter</em> und <em>Rück&shy;gabe&shy;werte</em> genutzt werden.</p>

                    <p class="fragment"> Durch Verschachtelung lassen sich
                        <em>Funktionen höherer Ordnung</em>
                        <i>(Higher-order functions)</i>
                        erschaffen
                    </p>
                </div>
            </section>


            <section>
                <h3>Higher-order functions – Beispiel</h3>

                <div>
                <pre style="width: 68%; margin: 0 100px"><code class="kotlin">class FirstClassFunction(
        val f1: (String) -> Int,
        val f2: (Int) -> Boolean) {

    fun strToBool(str: String): Boolean {
        val f: (String) -> Boolean = higherOrderFun()
        return f(str)
    }

    private fun higherOrderFun(): (String) -> Boolean {
        return { x -> f2(f1(x)) }
    }
}

fun main(args: Array&lt;String&gt;) {
    val c = FirstClassFunction(
                Integer::parseInt,
                { it % 2 == 0 }
            )
    val strings = listOf("2", "7", "8")
    println(strings.map(c::strToBool))
}</code></pre>
                </div>

                <div class="abs" style="top: 80px; left: 954px; width: 30%">
                    <p style="text-align: left; line-height: .83em; font-size: .8em">
                        &nbsp;<br>
                        <span class="fragment">&leftarrow; Funktion als <em>Parameter</em><br></span>
                        &nbsp;<br>
                        &nbsp;<br>
                        &nbsp;<br>
                        <span class="fragment">&leftarrow; Funktion als <em>Variable</em><br>
                        &nbsp;<br>
                        &nbsp;<br>
                        &nbsp;<br>
                        <span class="fragment">&leftarrow; Funk. als <em>Rückgabewert</em></span><br>
                        <span class="fragment">&leftarrow; <em>Kombination</em> via <em>Lambda</em></span><br>
                        <br></span>
                        <br></span>
                        &nbsp;<br>
                        &nbsp;<br>
                        &nbsp;<br>
                        <span class="fragment">&leftarrow; Funk.-<em>Referenz</em> </span><br>
                        <span class="fragment">&leftarrow; <em>Lambda</em>-Ausdruck</span><br>
                        &nbsp;<br>
                        &nbsp;<br>
                        <span class="fragment">&rightarrow; <i>Was kommt raus?</i> </span><br>
                        <br>
                    </p>
                </div>
            </section>

            <section class="center" data-background-iframe="https://play.kotlinlang.org/" data-background-interactive>
            </section>

            <section>
                <div style="width: 70%; margin: 0 auto;" >
                    <h3>Lambdas – Syntactic sugar</h3>
                    <div class="tgapxl">
                        <pre style=""><code class="kotlin">view.setOnClickListener({ e -> doSomething(e) })</code></pre>
                        <div class="fragment">
                            <p class="small" style="margin: -18px">&downarrow;</p>
                            <pre style=""><code class="kotlin">view.setOnClickListener() { e -> doSomething(e) }</code></pre>
                        </div>
                        <div class="fragment">
                            <p class="small" style="margin: -18px">&downarrow;</p>
                            <pre style=""><code class="kotlin">view.setOnClickListener { e -> doSomething(e) }</code></pre>
                        </div>
                        <div class="fragment">
                            <p class="small" style="margin: -18px">&downarrow;</p>
                            <pre style=""><code class="kotlin">view.setOnClickListener { doSomething(it) }</code></pre>
                        </div>
                    </div>
                </div>
            </section>


            <section>
                <!-- <h3>Lambdas – Syntactic sugar</h3> -->
                <!-- @formatter:off -->
                <div data-markdown style="width: 86%; margin: 60px auto 0 auto" class="left">
                    <script type="text/template">
                    Einsatz in vielen Bibliotheksfunktionen<!-- .element: class="decent tgap " -->
                    ```
                    println("I will not ...")
                    repeat(3) { println("  ...repeat myself") }
                    ```
                    </script>
                </div>
                <div data-markdown style="width: 86%; margin: 60px auto 0 auto" class="left fragment">
                    <script type="text/template">
                    How it works<!-- .element: class="decent tgap " -->
                    ```
                    public inline fun repeat(times: Int, action: (Int) -> Unit) {
                        // inline: Wirkung wie Makro-Element. Kein Funktionsoverhead!
                        for (index in 0..times - 1) {
                            action(index)
                        }
                    }
                    ```

                    
                    </script>
                </div>
                <!-- @formatter:on -->
            </section>


            <section data-verbatim class="container left">
                <!-- @formatter:off -->
                <div data-markdown  style="width: 64%; margin: 0 auto">
                    ##### `with(…) { }`: Parameter wird im Block zum `this`
                    ```
                    private fun toJSON(aha: Aha): JSONObject {
                        with(JSONObject()) {
                            put(JSON_ID, aha.id.toString())
                            put(JSON_TITLE, aha.title)
                            put(JSON_USEFUL, aha.isUseful)
                            return this
                        }
                    }
                    ```

                    ##### *Varianten* 
                    `apply()`, `let()` und  
                    `use()` als try-with–Equivalent
                </div>
                <!-- @formatter:on -->
            </section>


            <section>
                <h3>Typsichere DSLs über „Empfänger“-Objekt</h3>

                <p class="small left" style="width: 94%; margin: 0 auto">
                    Es ist möglich, Funktionssignaturen zu definieren, die Lambda-Ausdrücke
                    erwarten bei denen <code>this</code> auf Zielobjekte eines bestimmten Typs zeigen.
                </p>
                <p class="small left decent" style="width: 94%; margin: 20px auto">
                    Darüber sind typsichere DSLs möglich:
                </p>

                <!-- @formatter:off -->
                <div data-markdown style="width: 52%; margin: 0">
                    ```kotlin
                    class HTML {
                        fun body() { ... }
                    }

                    fun html(init: HTML.() -> Unit): HTML {
                      val html = HTML()
                      html.init()
                      return html
                    }

                    html {
                        body()
                    }
                    ```
                </div>
                <!-- @formatter:on -->

                <div class="abs" style="top: 264px; left: 610px; width: 60%">
                    <p style="text-align: left; line-height: .83em; font-size: .8em">
                        &nbsp;<br>
                        &nbsp;<br>
                        &nbsp;<br>
                        &nbsp;<br>
                        <span class="fragment">&leftarrow; Erwartet Funktion mit <code>this</code>
                            vom Typ <code>HTML</code></span><br>
                        <span class="fragment">&leftarrow; Erstellung des <i>receiver object</i> </span><br>
                        <span class="fragment">&leftarrow; Führe Lambda auf <i>receiver object</i>  aus</span><br>
                        <br>
                        <br>
                        <br>
                        <span class="fragment">&leftarrow; Kurzform von <code>html({…})</code></span><br>
                        <span class="fragment">&leftarrow; <em>Lambda</em>-Ausdruck für einen <code>HTML</code>-„Empfänger“</span><br>
                    </p>
                </div>
            </section>


            <section>
                <h3>Gradle Kotlin DSL – <code>build.gradle.kts</code></h3>

                <!-- @formatter:off -->
                <div data-markdown class="small" style="width: 70%; margin: 0 auto;">
                    ```kotlin
                    import org.jetbrains.kotlin.gradle.tasks.KotlinCompile

                    plugins {
                        base
                        kotlin("jvm") version "1.2.0" apply false
                    }

                    allprojects {
                        group = "org.gradle.kotlin.dsl.samples.multiprojectci"
                        version = "1.0"

                        repositories {
                            jcenter()
                        }
                    }

                    // Configure all KotlinCompile tasks on each sub-project
                    subprojects {

                        tasks.withType&lt;KotlinCompile> {
                            println("Configuring $name in project ${project.name}...")
                            kotlinOptions {
                                suppressWarnings = true
                            }
                        }
                    }

                    dependencies {
                        // Make the root project archives configuration depend on every subproject
                        subprojects.forEach {
                            archives(it)
                        }
                    }
                    ```
                </div>
                <!-- @formatter:on -->
            </section>


            <section>
                <h3>Operatoren</h3>
                <p>Über Namenskonventionen. Feste Menge &amp; Präzedenz</p>
                <div data-markdown class="small">
                    <textarea data-template >
                        | Operator      |   | Methode
                        | :-------:     |:-:| -------
                        | `a + b`       | &rightarrow; | `a.plus(b)`
                        | `a += b`      | &rightarrow; | `a.plusAssign(b)`
                        | `+a`          | &rightarrow; | `a.unaryPlus()`
                        | `++a`, `a++`  | &rightarrow; | `a.inc()`
                        | `a..b`        | &rightarrow; | `a.rangeTo(b)`
                        | `a[x]`        | &rightarrow; | `a.get(x)`
                        | `!a`          | &rightarrow; | `a.not()`
                        | …             |   | …
                    </textarea>
                </div>
            </section>

           <section data-markdown class="">
                <textarea data-template>
                    ## Kotlin/Native

                    ![Kotlin Targets](img/kotlin-native.png) <!-- .element: class="plain" style="width: 1040px" -->

                    LLVM-basierte Kompilierung von Kotlin-Code auf Plattformen ohne VM. <!-- .element: class="x-small decent"  -->
                </textarea>
            </section>

           <section data-markdown class="">
                <textarea data-template>
                    ## Multiplatform

                    *Code-Sharing* als Library für verschiedene Zielplattformen.

                    ##### Erwartete, native `object`-Instanz (Singleton) in der Library
                    ```
                    interface Base64Encoder {
                       fun encode(src: ByteArray): ByteArray
                    } 

                    expect object Base64Factory {
                        fun createEncoder(): Base64Encoder
                    }
                    ```
                    ##### …native Bereitstellung (hier: JVM)
                    ```
                    actual object Base64Factory {
                        actual fun createEncoder(): Base64Encoder = JvmBase64Encoder
                    }
                    ```
                    </textarea>
                    
            </section>

            <section data-markdown class="left">
                <textarea data-template>
                    ## Kotlin Coroutines
                    ### Coroutinen sind *leichtgewichtige* und *pausierbare* Berechnungen für die *sequentielle Programmierung asynchroner Logik*
                    
                    Nur die elementarsten Mittel sind Teil der Sprache.<!-- .element class="decent x-small tgapxl"--><br/>
                    Erst die Bibliothek `kotlinx.coroutines` stellt die High-Level Funktionen für Kommunikation, und Thread-Handling. 

                    Das Kotlin <!-- .element class="decent x-small"-->Framework [Ktor](https://ktor.io/) bringt z.B. eine komplett asynchrone Engine auf Basis der leichtgewichtigen Coroutinen.
                </textarea>
            </section>


            <section data-markdown >
                <textarea data-template>
                    ### Kotlin Coroutines: Beispiel
                    ```kotlin
                    import kotlinx.coroutines.*

                    fun main() {
                        runBlocking {                  // Eröffnet blockierend einen CoroutineScope

                            // Dieser Lambda-Block wird in der Coroutine ausgeführt
                            launch {                   // Startet im Hintergrund eine Coroutine
                                delay(999L)            // Suspendiert die Coroutine
                                println("Welt!")       // Ausgabe nach Fortsetzung
                            }

                            // Starte parallel 20x suspendierbare Funktionen
                            repeat(20) { launch { printDot() } }
                            print("Hallo") 
                        }
                        println("Ende")
                    }
                    
                    suspend fun printDot() {           // Nur aus CoroutineScope aufrufbar 
                        delay(500L)
                        print(".")
                    }
                    ```
                </textarea>
            </section>



            <section data-verbatim="">
                <h3>GUI &amp; <code>null</code> – Typische Konstellation</h3>
                <div data-markdown class="bgap">
                    Werte für Initialisierung erst im Android-Callbacks bekannt …

                    ```kotlin
                    class EditPersonActivity : FragmentActivity() {

                        var person: Person
                        var anrede: String
                        var imm: InputMethodManager
                        …

                        override fun onCreate(savedInstanceState: Bundle?) {
                            super.onCreate(savedInstanceState)
                            val personId = savedInstanceState?.getInt("value",0)

                            person = PersonManager.load(id)
                            anrede = resources.getString(R.string.anrede)
                            imm = getSystemService(INPUT_METHOD_SERVICE) as InputMethodManager
                        }
                    }
                    ```
                </div>
                <div class="abs handwriting fragment"
                     style="width: 530px;  transform: rotate(-7deg);
                            left: 620px; top: 270px; color: #f33; font-size: 200%">
                    So nicht möglich!
                </div>
            </section>


            <section data-verbatim="" class="left">
                <h3>Lösungen: Verzögerte Initalisierung</h3>
                <div data-markdown class="bgap">
                    ##### `lateinit` Properties (empfohlen)
                    ```kotlin
                    lateinit var person: Person
                    ```
                </div>
                <div data-markdown class="bgap fragment">
                    ##### Delegation des Properties
                    ```kotlin
                    var anrede: String by Delegates.notNull()
                    ```
                </div>
                <div class="fragment">
                    <div data-markdown class="bgap">
                        ##### Lazy-Initalisierung
                        ```kotlin
                        val imm: InputMethodManager by lazy {
                            getSystemService(INPUT_METHOD_SERVICE) as InputMethodManager
                        }
                        ```
                    </div>
                    <div class="abs handwriting"
                         style="width: 580px;  transform: rotate(+9deg);
                                left: 760px; top: 230px; ">
                                Wirft sprechende Exception, falls ohne
                                Initialisierung gelesen wird!
                    </div>
                </div>
            </section>


            <section data-verbatim>
                <h3>Infix Notation</h3>

                <!-- @formatter:off -->
                <div data-markdown style="width: 60%; margin: 48px auto;" >
                ```kotlin
                infix fun Int.shl(x: Int): Int {
                   …
                }

                1 shl 2       // als Equivalent zu 1.shl(2)
                ```
                </div>
                <!-- @formatter:on -->
                <div data-markdown class="container small">
                    1. Sind Member-Funktionen oder Extension Methods
                    2. Haben einen einzigen Parameter
                    3. Und sind mit dem `infix` Schlüsselwort markiert
                </div>
            </section>

        </section>



        <!--
          === Fazit ==== =========================================================================
        -->
        <section>

            <section class="center">
                <h1>Fazit</h1>
                <!-- <h3 style="margin: -1.2em 0"  >&amp;<br> Ausblick</h3> -->
            </section>

 
            <section>
                <h2>Im Browser <!--mitmachen &amp;--> ausprobieren</h2>
                <!-- <img data-src="img/try-kotlin.png" style="width: 100%" alt="Kotlin Koans">-->
                <iframe data-src="https://play.kotlinlang.org/koans" width="1280" height="540"></iframe>

                <p style="font-size: 140%; margin-top: -12px;" class="decent">
                    &rightarrow; <a href="https://play.kotlinlang.org/koans"><b>play.kotlinlang.org/koans</b></a>
                </p>
            </section>

            <section data-verbatim="">
                <h3>Lernen: Kotlin Koans</h3>
                <img data-src="img/koans-edu-plugin.png"
                     style="width: 72%"
                     alt="Kotlin Educational Plugin mit Kotlin Koans">
            </section>


            <section>
                <h2>Quellen &amp; Materalien</h2>

                <div class="threecol small left" data-markdown>
                    ##### Materialien für den Einstieg
                    * [*kotlinlang.org*](https://kotlinlang.org/)
                    * [*Kotlin Koans*](https://kotlinlang.org/docs/koans.html) 
                    * [Ein Überblick über Java-Alternativen für den industriellen
                    Einsatz](http://www.heise.de/developer/artikel/Ein-Ueberblick-ueber-Java-Alternativen-fuer-den-industriellen-Einsatz-2074554.html)
                    
                    **Dieses Deck**   <br/>                    
                    ![https://bentolor.github.io/kotlin-talk/](img/qr.png)
                </div>

                <div class="threecol small left" data-markdown>
                    ##### Referenzen
                    - [Sprachreferenz](http://kotlinlang.org/docs/reference/)

                    ##### Verzeichnisse
                    - [*Awesome Kotlin* `http://kotlin.link`](http://kotlin.link/)
                    - [OSS Projects &amp; Libraries](https://kotlinlang.org/docs/resources.html)

                    ##### Diverses
                    - [@kotlin](https://twitter.com/kotlin), [@bentolor](https://twitter.com/bentolor),
                       [github.com/bentolor](https://github.com/bentolor)
                </div>

                <div class="threecol small left" data-markdown>
                    ##### Nennenswerte Frameworks
                    - [KTor](https://ktor.io/) Connected Apps
                    - [Micronaut](https://micronaut.io/) Cloud-native
                    - [Spring Boot](https://spring.io/guides/tutorials/spring-boot-kotlin/) Web
                    - [SparkJava](http://sparkjava.com/) Web
                    - [Mockk](https://github.com/mockk/mockk) Testing
                    - [Koin](https://insert-koin.io/) DI

                </div>

                <div style="clear: left;"></div>

                <div class="x-small" style="padding-top: 24px; clear: left" data-markdown>
                    Bildnachweis:
                    [Kotlin Islands Maps](https://commons.wikimedia.org/wiki/File:Kotlin_Island_1706.png),
                    [Atomic bomb
                    explosion](https://www.pond5.com/stock-footage/37592494/fireball-and-smoke-formation-out-atomic-blast.html),
                    [Android Robot](https://commons.wikimedia.org/wiki/File:Android_robot.svg),
                    [Kotlin Logo](https://resources.jetbrains.com/assets/products/kotlin/kotlin_logos.zip),
                    [Hand-written arrows](http://designercandies.net/hand-drawn-arrows-brush/)
                </div>
            </section>

        </section>


    </div>
</div>

<script src="dist/reveal.js"></script>

<!-- hide "verbatim" sections if URL contains "terse"-Keyword -->
<script>
    if (window.location.search.match(/terse/gi)) {
        var sections = document.getElementsByTagName('section');
        for (var i = sections.length-1; i > -1; --i) {
            if (sections[i].hasAttribute("data-verbatim")) {
                sections[i].remove();
            }
        }
    }
</script>

<script src="dist/reveal.js"></script>
<script src="plugin/notes/notes.js"></script>
<script src="plugin/markdown/markdown.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script src="plugin/zoom/zoom.js"></script>
<script>
    // More info https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        history: true,
        progress: true,
        slideNumber: true,
        mouseWheel: true,
        controls: true,
        fragments: true,
        width: 1280,
        height: 720,
        margin: 0.1,
        maxScale: 10,
        center: false,
        parallaxBackgroundImage: 'img/kotlin-island-map-light.png', // 'http://jamescroft.co.uk/wp-content/uploads/2015/01/217-L6YVU1.jpg',
        parallaxBackgroundSize: '4177px 2118px',
        plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
    });
</script>

<!-- hack: increase playback speed of background video -->
<script>
    Reveal.addEventListener( 'speedupvideo', function() {
        document.getElementsByTagName("video")[0].playbackRate = 2
    }, false );
</script>

<script src="./live.js"></script>


</body>
</html>
